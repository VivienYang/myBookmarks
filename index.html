<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>网页收藏夹</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>header</header>
    <main>
        <div class="wrapper" id="mainxxx"></div>
    </main>
    <footer></footer>
    <script>
        var keys = new Array(4)
        keys[0] = ['1','2','3','4','5','6','7','8','9','0'];
        keys[1] = ['q','w','e','r','t','y','u','i','o','p'];
        keys[2] = ['a','s','d','f','g','h','j','k','l'];
        keys[3] = ['z','x','c','v','b','n','m'];
        var hash = {
            '1':'taobao.com',
            '2':'tmall.com',
            '3':'zhihu.com',
            'q':'qq.com',
            'y':'youtube.com',
            'i':'iqiyi.com',
            'a':'alibaba.com',
            's':'sohu.com',
            'z':'zhihu.com',
            'm':'mail.qq.com'
        }
        var hash_ls = JSON.parse(localStorage.getItem('hash_ls')||'null')
        if(hash_ls){
            hash = hash_ls;
        }
        for(i=0;i<keys.length;i++){
            var div = document.createElement('div')
            for(j=0;j<keys[i].length;j++){
                var kbd = document.createElement('kbd')
                var textSpan = document.createElement('span')
                textSpan.textContent = keys[i][j]
                textSpan.className = 'key'
                kbd.appendChild(textSpan)
                var iconImg = document.createElement('img')
                var item = keys[i][j];
                // console.log('item'+item+'===='+hash[item])
                if(hash[item]){
                    console.log('item'+item+'===='+hash[item])
                    iconImg.src="https://"+hash[item]+"/favicon.ico"
                }else{
                    iconImg.src="//i.loli.net/2017/11/10/5a05afbc5e183.png"
                }
                kbd.appendChild(iconImg)
                var buttonX = document.createElement('button')
                buttonX.textContent = 'edit'
                buttonX.id = keys[i][j];
                kbd.appendChild(buttonX)
                div.appendChild(kbd)
                buttonX.onclick = function(xxx){
                    console.log(buttonX)
                    // console.log(xxx)
                    console.log(xxx.target)
                    var new_url = prompt('请输入您希望关联的网址')
                    hash[xxx.target.id]=new_url;
                    localStorage.setItem('hash_ls',JSON.stringify(hash))
                }
            }
            mainxxx.appendChild(div)
        }
        document.onkeypress = function(yyy){
            console.log(yyy);
            
            if(hash[yyy.key] && hash[yyy.key].length>0){
                var url = 'https://'+hash[yyy.key];
                // location.href = url;
                window.open(url,'_blank')
            }else{
                alert(`您没有定义按键${yyy.key}对应的网址`)
            }
            
        }
    </script>
</body>
</html>